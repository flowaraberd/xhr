<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JS XHR</title>
</head>

<body>
    <script>
        'use strict';
        const c = console.log;

        const usuarios = [{
            id: 1,
            name: "Carlos"
        },
        {
            id: 2,
            name: "Alberto"
        }];

        const telefonos = [{
            id: 1,
            telefono: "123456"
        },
        {
            id: 2,
            telefono: "654321"
        }];

        let getUsers = valor => {
            return new Promise((resolve, reject) => {
                /**
                 * resolve: es una funcion la cual se llama en caso de que la promesa sea completada
                 * reject: este metodo se llama en caso de que de error.
                 */
                setTimeout(() => {
                    if (usuarios.find(user => user.id == valor)) {
                        getPhone(valor).then(mensaje => {
                            c(mensaje)
                        });
                        resolve('El usuario Existe! es: ' + usuarios.find(users => users.id == valor).id);
                    } else {
                        reject('El usuario no Existe!');
                    }
                }, 2300);
            })
        }

        /** Llamar al metodo: getUsers y pasarle el valor a buscar
         * en este caso se le pasa el ID 1 y verifica si se encuentra en el obj.
        */
        getUsers(1).then(mensaje => {
            c(mensaje)
        }).catch(err => {
            c('Error: ' + err);
        })

        let getPhone = valor => {
            return new Promise((resolve, reject) => {
                setTimeout(() => {
                    if (telefonos.find(phone => phone.id == valor)) {
                        resolve('El telefono Existe! es: ' + telefonos.find(phone => phone.id == valor).telefono);
                    } else {
                        reject('El telefono no Existe!');
                    }
                }, 20);
            })
        }
























// // import getData from './server/app.js';

// async function main(){
//     // const data = await getData();
//     // console.log(data)
// }
// main();




// const xhr = new XMLHttpRequest();
// xhr.open("GET","https://jsonplaceholder.typicode.com/users/1");
// xhr.setRequestHeader("Content-Type","application/json");
// xhr.responseType = "JSON";

// xhr.onreadystatechange = function(){
//     if(xhr.status == 200 && xhr.readyState == 3)
//     console.log(JSON.parse(xhr.response));
//     // Process the server response here.
// };

// xhr.addEventListener('onload', ()=>{
//     console.log(xhr.response);
// })
// xhr.send();



    </script>
    <!-- <script src="./server/app.js"></script> -->
</body>

</html>